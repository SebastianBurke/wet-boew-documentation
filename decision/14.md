---
published: true
layout: default-theme-wet-boew-en
title: "Design decision 14 - Semantic Versioning public API for wet-boew, GCWeb and GCWeb Jekyll"
description: "The following are an updated and improved version of the Design Decision #3 about WET versioning API."
modified: 2022-06-23
---

## Summary

* **Author:** @duboisp
* **Experts:** @duboisp
* **Status:** Proposal Candidate
* **Last updated:** 2022-06-23
* **History:**
	* (2022-12-28) Splitting the following measurement:
		* Interaction pattern (ex. Functional event listing)
			* Essential component behaviour
			* Function, callback and events
		* Context of use (ex. Guidance)
			* Context of use
			* Guidance
	* (2022-12-28) Clarifying the archive pages are out of scope
	* (2022-11-15) Added distributed files in the versioning API, defining variants and additional edits
	* (2022-09-22) Clarified exception for some CSS class name programaticly used and expiration/removal of deprecated feature
	* (2022-06-29) Revised
	* (2022-06-23) Presented
	* (2022-06-22) Draft


The following is an updated and improved version of the [Design Decision #3 about WET versioning API](3.html). It provides more details about what is versioned for the wet-boew product, GCWeb product and GCWeb Jekyll product.

The [Semantic Versioning 2.0](https://semver.org/) is followed and applied.

## Versioned

Below are the items of our product that we are monitoring and illustrating changes via our version number.

### WET-BOEW

* Product, excluding its deployment file structure
* Components

Measured:
* Component list
* Layout
* Style
* Semantic
* Function, callback and events
* Essential component behaviour
* Context of use
* Configuration
* Static data value or its associated variable name
* Schema of the component variable data
* Component dependencies
* Packaged files essentials and directly linked from pages

Always a patch:
* Sub-dependencies loaded via script, like data table and polyfills.
* Provisional feature

Excluded:
* Templates
* Site content including documentation and working example pages
* Guidance

Audience: Web author of the wet-boew product in a static server side environment.


### GCWeb

* Product, excluding its deployment file structure
* Components
* Templates

Measured:
* Component list
* Layout
* Style
* Semantic
* Function, callback and events
* Essential component behaviour
* Context of use
* Configuration
* Static data value or its associated variable name
* Schema of the component variable data
* Component dependencies
* Packaged files essentials and directly linked from pages
* Change in the wet-boew dependencies components that require author to re-edit or provide new stable features for their page main content

Always a patch:
* Sub-dependencies loaded via script, like data table and polyfills.
* Provisional feature
* Méli-mélo compilation
* Thématique feature

Excluded:
* Guidance because this are managed by the Digital Transformation Office at Treasury Board Secretariat
* Site content including documentation and working example pages

Templates:
* Fully in scope:
	* Baseline template and generic template
	* Widely used template
* Identified at most as a minor change with a breaking change when:
	* Moderately used and accompanied with an official communication out explicitly identified in the release notes
* Identified at most as a patch change with a breaking change when:
	* Limited use with all its active instances explicitly listed in its corresponding template documentation.

Where:
* Instance: Measured by the number of instances found on Canada.ca and by feedback received.
* Widely: There is more than 500 instance or reported widely used by various departments.
* Moderated: There is less than 750 instance or changes on Canada.ca are fully managed and applied by Principal Publisher.
* Limited: There is a few instance which are all explicitly listed in its corresponding template documentation.

Audience: Web author creating pages with the GCWeb product in a static server side environment.


### GCWeb Jekyll

* Product

Measured:
* List of includes and its purpose
* List of layout and its purpose
* Front-matter configuration
* Site core configuration
* Jekyll component configuration
* Change in component that require author to re-edit or provide new stable features for their page main content

Audience: Web author that create pages with the GCWeb Jekyll theme.

## Feature removal (Deprecation and backward compatibility)

Deprecated feature/code will last or remain functional for at least one (1) year from when it was formally deprecated. It might not render exactly the same but an equivalent version would remain functional. After that period, its removal would be identified by a major version as specified by the semantic versioning API.

For example, site that was using GCWeb (before v5.0) with the pre-2019 mega menu + breadcrumbs and haven't changed their HTML markup was compatible with GCWeb until version v11.0.0 which was released on May 2022.

### Documentation of deprecated component/feature

Scope: Components and features that has been deprecated from the component perspective but need to remain there for backward compatibility.

Its documentation are removed from a component perspective. That documentation would remain available from a product perspective moved outside the component. However, the backward compatibility code and generic/common deprecated working example will remain inside the component folder for quality control until the formal removal of the deprecated feature through a major version of the product is completed.

### Formal removal

For feature/component that have been stale for at least one year from when it was deprecated from a product release.

The following steps must have been completed, documented and published.
* Search on Canada.ca active pages (excluding archived pages) to detect if the pattern or the deprecated code are still in use.
  * When instances are found:
    * A communication is completed with the affected client and we let a reasonable time to mitigate the required changes if justified.
  * When no instance are found:
    * Proceed with the removal if the other condition are met
* Mention the feature removal into at least two (2) WET monthly meeting where it's corresponding meeting notes has been published live for at least 30 days.
* Removal can only be completed after one (1) year of when it was identified deprecated in a product release.

## Measures definition

Short description how the measured items are measured


### Layout (ex. Wireframe)

Defined by how the semantic or inner component are organized among others within a component. Multiple layout can be supported for the same component. A layout can contain sub-layout which its own set of configuration.

* **Major layout change:** When a defined sub-layout is removed or reorganized. Merging two sub-layout is considered reorganized.
* **Minor layout change:** When a new layout variant is added.
* **Patch layout change:** N/A

Example with WET-BOEW and GCWeb:

* **Major:** When a defined sub-layout is removed or a reorganization that require web author/web developer to update their existing pages.
* **Minor:** When a new layout variant is added.
* **Patch:** A reorganization that can be applied without changing anything exception of implementing (installing) the updated library. Like when the changes is fully managed by the javascript library.

Example of observable:
* Wireframe
* Rendered HTML that leverage a CSS positioning mechanism (ex. grid system)


### Style (ex. CSS):

Define the visual aesthetic of a component.

* **Major style change:** Significant changes that change the meaning of the component or/and directly imply a major change in another component composition (like Layout, Semantic...).
* **Minor style change:** The addition of a new styles in order to visually enhance the component based on addition of a new configuration.
* **Patch style change:** Update to an existing style or an addition that don't imply a new configuration or an addition that enhance the component with no change in meaning of the component.

Example with WET-BOEW and GCWeb:

* **Major:** A removal or a change of CSS class name that provide meaning and require a web author/web developer intervention to update the published content. A style that impact the published content to be reviewed, re-architect, re-organized or re-published to avoid breaking change in the communication (ex. web page). The removal of a styled configuration that is repurposed to a new component or guidance that are updated in a matter to deprecate the use of such configuration.
	For example, increasing the font size from 16px to 20px considerably impact campaign page that are tightly designed to use all the available space without impacting the layout of the promotional content.

* **Minor:** The addition of a new style or a new class name that support a new configuration to be used by an author.
* **Patch:** Change that can be applied without changing anything exception of implementing (installing) the updated library. That means the changes is fully managed by the library.
	For example, the visual change for the alert component where the alert in a coloured box (Bootstrap 3) is now change to be a large left coloured border. CSS change (style and class name) that was designed for and only used programaticaly.

Example of observable:
* CSS class name and SASS rules. (Only the ones that was designed to be use by an author to customize the component.)
* Textual description of the style itemized


### Semantic (ex. HTML):

Provide a meaning of the dynamic data (schema) and static data contained, managed and visible through the component.

* **Major change:** Removal of a dynamic data piece defined with semantic
* **Minor change:** Addition of a dynamic data piece defined with semantic
* **Patch change:** Not applicable

Example with WET-BOEW and GCWeb:

* **Major:** Removal of an HTML element and/or HTML attribute/value by the users
* **Minor:** Addition of HTML element and/or HTML attribute/value by the users
* **Patch:** Removal of an HTML element or attribute that don't impact any previous semantic. In order word the previous HTML markup used for coding the component can stay the same, no change required by the users. Or any change (removal, addition, update) in HTML markup that are generated and injected by the javascript.

Example of observable:
* HTML markup ordered and excluding generic element
* Dynamic data item which are link to a semantic tag


### Function, callback and events

Define the component JavaScript API which can be leveraged for an integration with a third party software. Function in scope are the one which are public or available through a global object which are out of scope of the framework internal. Callback in scope are the one used by public function or set through global variable that are outside the scope of the framework internal. Events in scope are the ones where a third party software we can bind/trigger through the DOM or via jQuery events handler.

* **Major change:** Removal of an public function, callback or events or major remodel of existing function, callback or events that require users to review how the component is used by their third party software.
* **Minor change:** Addition of an public function, callback or events.
* **Patch change:** Bug fixing or improvement of the code executed behind the function, callback and events.

Example with WET-BOEW and GCWeb:

* **Major:** Removal of function that require an update the corresponding HTML markup because the binding will be broken.
* **Minor:** Addition of a new jQuery event or addition of a new parameter in a function/callback
* **Patch:** Code update made inside a function or an event.

Example of observable:
* Public function name with its parameter list + type
* Callback signature with its parameter list + type
* Event name with its custom parameter list + type if any
* Signature of a function exposed externally through the `wb` global object


### Essential component behaviour

Behaviour and interaction, that if removed, could change the meaning of the component and/or impact implementer/author to apply an adaptation to their existing content build with that component.

* **Major change:** Removal of an essential behaviour and interaction. Or major remodel of an existing behaviour/interaction that require users to review how the component is used in their content.
* **Minor change:** Addition of an essential behaviour or interaction
* **Patch change:** Refining an essential behaviour or interaction definition or remodel of an existing behaviour without requiring any users intervention neither changing the meaning of the component.

Example with WET-BOEW and GCWeb:

* **Major:** Removal of an essential behaviour that require an update the corresponding HTML markup, like removing an HTML button "Pause" on a carousel.
* **Minor:** Formal identification of an behaviour as being essential.
* **Patch:** Refining or/and clarifying the scope and the output of an existing identified essential behaviour.

Example of observable:
* List of essential behaviours along with a definition and example is any

### Guidance

Define how a component should be use, when and where to ensure it is used/presented uniformly through the organization. This measure is out of scope for WET-BOEW, GCWeb and GCWeb-jekyll.

* **Major change:** Removal of a practice requiring the user to review and change or adapt their content. Like restricting the scope of use for a component.
* **Minor change:** Addition of a practice where it expand the scope of the component.
* **Patch change:** Clarification in the context of use, without requiring the intervention of the user to rethink their published work.

Example with WET-BOEW and GCWeb:

* **Major:** Not applicable but it might imply a change in the configuration and/or in the essential component behaviour.
* **Minor:** Not applicable but it might imply a change in the configuration and/or in the essential component behaviour.
* **Patch:** Not applicable but it might imply a change in the configuration and/or in the essential component behaviour.

Example of observable:
* Guidance

### Context of use:

Define where the component can be used in the page code or in a special context.

* **Major change:** Addition of a context restriction that is narrower of it's preceding definition.
* **Minor change:** Removal of a context restriction to be more generic or the addition of an new context where the component can be used
* **Patch change:** Clarification of an existing context of use without requiring the intervention of the user to rethink their published work.

Example with WET-BOEW and GCWeb:

* **Major:** Restricting a component to be used inside another component like a in a 8 column wide (medium) which was before allowed to be used as direct children of the main element.
* **Minor:** A component which was restricted to be used in a column component can not be used in as a direct children of the main element.
* **Patch:** Clarification of how a context are explained for a component.

Example of observable:
* Definition of the context of use for the component.
* Component to be used in page header or page footer or in main page area.
* Component documented and defined inside the "/sites/" folder in GCWeb have a context of use limited to the global page or page header or page footer or commonly used across multiple pages like date modified which are located in the footer of the main content area.
* Component documented and defined inside the "/components/" folder in GCWeb have a context of use with a baseline to the main content area.
* CSS selector that identify the context of use.

### Configuration (ex. Customization description):

Configuration that transform or adapt the plain component to better meet the user need. Providing a configuration should be optional and when it is required it must provide/define default value.

* **Major change:** Removal of a configuration name or a change in the default value that require a change by the users.
* **Minor change:** Addition of a new configuration which require somehow to be activated by the user.
* **Patch change:** Removal of a configuration that don't break the component neither require the user to make update at their published work.

Example with WET-BOEW and GCWeb:

(This include the configuration technical name used in a JSON configuration file or in HTML attribute or as a CSS flag in order to configure the component.)

* **Major:** Removal of a configuration or a change in its default value which impact the component behaviour/state and require a user intervention in their published work.
* **Minor:** Addition of a new configuration.
* **Patch:** Removal of a configuration with is managed through a workaround to prevent updating the user to update their published work.

Example of observable:
* Customization description and default value


### Static data (ex. i18n text string):

Stateless text used by the component except when changing the language. i18n means internalization.

* **Major change:** Removal or rewrite of a i18n text string. Addition of a required i18n text string in the component.
* **Minor change:** Addition of an optional i18n text string
* **Patch change:** Removal of a i18n text string but if kept it don't negatively impact the published work and so no change required by the user.

Example with WET-BOEW and GCWeb:

(The key identifying a i18n text string is monitored and not the i18n text value as is. Except if it is added as a text node in the HTML markup of the component which belong to semantic component composition.)

* **Major:** Removal or addition of an i18n text string that impact published work. Like through its plugin configuration.
* **Minor:** Addition of an optional i18n text string
* **Patch:** Addition or removal of i18n text string but where a workaround is managed through javascript or CSS without impacting the published work of the user.

Example of observable:
* i18n text string
* unlocalized key identifying a i18n text string

### Schema (ex. Shape graph; data layer):

Stateful text or data to deliver information or user experience by using the component

* **Major change:** Removal of a data or the addition of new pieces of data required by component which require the intervention of the user in their published work.
* **Minor change:** Addition of an optional data.
* **Patch change:** Change of a data piece from static to dynamic that don't require any change by the user.

Example with WET-BOEW and GCWeb:

* **Major:** Idem
* **Minor:** Idem
* **Patch:** Idem, but removal or addition that is fully managed through javascript or CSS without impacting the published work of the user.

Example of observable:
* Shape graph
* List of variable

### Component essential dependencies (ex. List of major versioned component):

* **Major change:** Removal of essential dependencies if the user need to review and adapt their published work.
* **Minor change:** Addition of new dependencies that provide new configurable feature requiring the user to activate it.
* **Patch change:** Update of the dependencies without breaking any existing published work. Removal and addition that require no intervention from the user.


Example with WET-BOEW and GCWeb:
* **Major**: Idem
* **Minor**: Idem
* **Patch**: Removal where the library are implementing a work around that are not breaking existing published work.

Example of observable:
* List of major versioned component

### Packaged files essentials and directly linked from pages

Measured as if an implementer deploy and rewrite the distributed packages, would he need to update some of their published web pages to support that new deployment.

* **Major change**: Removal of a files identified or previously identified essentials and that are directly linked from a page
* **Minor change**: Addition of a new file that is going to be identified essentials and be directly linked from a page.
* **Patch change**: Update of an existing essential files or when a changes occurs in the others files contained that are indirectly linked, like via script or CSS.

Example with WET-BOEW and GCWeb:
* **Major**: Removal of wet-boew.min.js linked by every pages
* **Minor**: Addition of an essential decorative common image on a template or used by a component
* **Patch**: Update of an existing essential file like theme.min.css or/and sub-dependencies loaded by modernizer like datatable.net

Example of observable:
* Files and folder structure of the distribution packaged in a zip file attached to the release.

## Variants

A variant is a distinctive alternate configuration of a measured component. A version of a component is a variant.

### Variant identification

A variant are defined by one of more of the following properties:

* Version number: An immutable tag usually starting with the prefix "v" followed by a semantic version number, like: "v1.2.3". Or a date like 2022-11-16.
* Variant name: Human readable short name that make the variant distinctive among other variant name.
* Observed on: A reference date of when the informational variant details was captured and documented.

### Type of variant

Identifier: Combination of its variant name followed by its version number which need to remain unique across time.

There is four (4) type of variant:
* Stable: A supported component variant
  - Version API impact for the component:
    * Major: The variant is deprecated or removed
	* Minor: The variant is newly added
	* Patch: The variant is updated
* Provisional: Experimental feature in a good standing to be stabilized
  - Version API impact for the component:
    * Major: Not applicable
	* Minor: Not applicable
	* Patch: The provisional variant is updated or deprecated
* Informational: Variant where it's structure is mostly managed by other factor like JS. For example the enhanced interface of a carousel component.
  - Version API impact for the component:
    * Major: Not applicable
	* Minor: Not applicable
	* Patch: The informational variant is updated or removed
* Deprecated
  - Version API impact for the component:
    * Major: The stable variant is deprecated or removed
	* Minor: Not applicable
	* Patch: The provisional variant or informational variant is deprecated or removed
  - Version API impact for the product:
    * Major: When the backward compatible code of a variant is fully removed
	* Minor: Not applicable
	* Patch: The variant pattern still work on existing content.
